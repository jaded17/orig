 <div class="content-wrapper">
      <button class="add-btn" (click)="openAddModal()">Add Role</button>

      <div class="table-container">
        <h2 class="table-title">Role List</h2>

        <div class="table-controls">
          <div class="table-info">
            <span>Show</span>
            <select [(ngModel)]="entriesPerPage" class="entries-select">
              <option [value]="100">100</option>
              <option [value]="50">50</option>
              <option [value]="25">25</option>
            </select>
            <span>entries</span>
          </div>

          <div class="table-actions">
            <button class="control-btn delete-btn" 
                    [disabled]="!hasSelected()"
                    (click)="bulkDelete()">
              Delete selected
            </button>
          </div>
        </div>

        <div class="search-container">
          <label>Search:</label>
          <input type="search" [(ngModel)]="searchTerm" placeholder="Search roles..." class="search-input">
        </div>

        <table class="data-table">
          <thead>
            <tr>
              <th><input type="checkbox" (change)="toggleAll($event)" [checked]="allSelected()"></th>
              <th>ID ↕</th>
              <th>Title ↕</th>
              <th>Permissions ↕</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let role of filteredRoles()">
              <td><input type="checkbox" [(ngModel)]="role.selected"></td>
              <td>{{ role.id }}</td>
              <td>{{ role.title }}</td>
              <td>
                <span class="permission-badge" *ngFor="let perm of role.permissions">{{ perm }}</span>
              </td>
              <td class="actions-cell">
                <button class="action-btn view-btn" (click)="openViewModal(role)">View</button>
                <button class="action-btn edit-btn" (click)="openEditModal(role)">Edit</button>
                <button class="action-btn delete-btn" (click)="openDeleteModal(role)">Delete</button>
              </td>
            </tr>
          </tbody>
        </table>

        <div class="table-footer">
          <span class="showing-text">Showing 1 to {{ roles.length }} of {{ roles.length }} entries</span>
          <div class="pagination">
            <button class="page-btn" disabled>Previous</button>
            <button class="page-btn active">1</button>
            <button class="page-btn" disabled>Next</button>
          </div>
        </div>
      </div>
    </div>

    <!-- ADD ROLE MODAL -->
    <div class="modal-overlay" *ngIf="showAddModal" (click)="closeAddModal()">
      <div class="modal" (click)="$event.stopPropagation()">
        <div class="modal-header">
          <h2>Add New Role</h2>
          <button class="close-btn" (click)="closeAddModal()">×</button>
        </div>
        <div class="modal-body">
          <p class="modal-subtitle">Create a new role with permissions</p>
          
          <form [formGroup]="addRoleForm">
            <div class="form-group">
              <label>Role Name *</label>
              <input 
                type="text" 
                formControlName="title"
                placeholder="e.g., Administrator"
                class="form-input"
                [class.error]="addRoleForm.get('title')?.invalid && addRoleForm.get('title')?.touched">
              <span class="error-text" *ngIf="addRoleForm.get('title')?.invalid && addRoleForm.get('title')?.touched">
                Role name is required (min 3 characters)
              </span>
            </div>

            <div class="form-group">
              <label>Permissions *</label>
              <div class="permissions-list">
                <label class="checkbox-label" *ngFor="let perm of availablePermissions">
                  <input 
                    type="checkbox" 
                    [value]="perm"
                    (change)="onPermissionChange($event, perm)">
                  {{ perm }}
                </label>
              </div>
              <span class="error-text" *ngIf="addRoleForm.get('permissions')?.invalid && addRoleForm.get('permissions')?.touched">
                Please select at least one permission
              </span>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button class="btn-cancel" (click)="closeAddModal()">Cancel</button>
          <button class="btn-submit" 
                  [disabled]="addRoleForm.invalid || submitting"
                  (click)="addRole()">
            {{ submitting ? 'Creating...' : 'Create Role' }}
          </button>
        </div>
      </div>
    </div>

    <!-- VIEW ROLE MODAL -->
    <div class="modal-overlay" *ngIf="showViewModal" (click)="closeViewModal()">
      <div class="modal" (click)="$event.stopPropagation()">
        <div class="modal-header">
          <h2>Role Details</h2>
          <button class="close-btn" (click)="closeViewModal()">×</button>
        </div>
        <div class="modal-body">
          <div class="detail-item">
            <label>ID</label>
            <p>{{ selectedRole?.id }}</p>
          </div>

          <div class="detail-item">
            <label>Title</label>
            <p>{{ selectedRole?.title }}</p>
          </div>

          <div class="detail-item">
            <label>Permissions</label>
            <p>
              <span class="permission-badge" *ngFor="let perm of selectedRole?.permissions">{{ perm }}</span>
            </p>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn-cancel" (click)="closeViewModal()">Close</button>
        </div>
      </div>
    </div>

    <!-- EDIT ROLE MODAL -->
    <div class="modal-overlay" *ngIf="showEditModal" (click)="closeEditModal()">
      <div class="modal" (click)="$event.stopPropagation()">
        <div class="modal-header">
          <h2>Edit Role</h2>
          <button class="close-btn" (click)="closeEditModal()">×</button>
        </div>
        <div class="modal-body">
          <p class="modal-subtitle">Update role information</p>
          
          <form [formGroup]="editRoleForm">
            <div class="form-group">
              <label>Role Name *</label>
              <input 
                type="text" 
                formControlName="title"
                class="form-input"
                [class.error]="editRoleForm.get('title')?.invalid && editRoleForm.get('title')?.touched">
              <span class="error-text" *ngIf="editRoleForm.get('title')?.invalid && editRoleForm.get('title')?.touched">
                Role name is required (min 3 characters)
              </span>
            </div>

            <div class="form-group">
              <label>Permissions *</label>
              <div class="permissions-list">
                <label class="checkbox-label" *ngFor="let perm of availablePermissions">
                  <input 
                    type="checkbox" 
                    [value]="perm"
                    [checked]="isPermissionSelected(perm)"
                    (change)="onEditPermissionChange($event, perm)">
                  {{ perm }}
                </label>
              </div>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button class="btn-cancel" (click)="closeEditModal()">Cancel</button>
          <button class="btn-submit" 
                  [disabled]="editRoleForm.invalid || submitting"
                  (click)="updateRole()">
            {{ submitting ? 'Updating...' : 'Update Role' }}
          </button>
        </div>
      </div>
    </div>

    <!-- DELETE CONFIRMATION MODAL -->
    <div class="modal-overlay" *ngIf="showDeleteModal" (click)="closeDeleteModal()">
      <div class="modal modal-small" (click)="$event.stopPropagation()">
        <div class="modal-header">
          <h2>Delete Role?</h2>
          <button class="close-btn" (click)="closeDeleteModal()">×</button>
        </div>
        <div class="modal-body">
          <p>Are you sure you want to delete the role <strong>{{ selectedRole?.title }}</strong>?</p>
          <p class="warning-text">This action cannot be undone.</p>
        </div>
        <div class="modal-footer">
          <button class="btn-cancel" (click)="closeDeleteModal()">Cancel</button>
          <button class="btn-delete" 
                  [disabled]="submitting"
                  (click)="confirmDelete()">
            {{ submitting ? 'Deleting...' : 'Delete' }}
          </button>
        </div>
      </div>
    </div>